plugins {
    id 'java'
    id 'maven-publish'
}

group 'org.tdf'
version '1.1.20'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

ext {
    lombokVersion = '1.18.10'
    commonsCodecVersion = '1.13'
    scastleVersion = '1.58.0.0'
    jacksonVersion = '2.10.0'
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compileOnly "org.projectlombok:lombok:${lombokVersion}"
    testCompileOnly "org.projectlombok:lombok:${lombokVersion}"
    annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
    testAnnotationProcessor "org.projectlombok:lombok:${lombokVersion}"

    testCompile "commons-codec:commons-codec:${commonsCodecVersion}"
    testCompile "com.madgag.spongycastle:core:${scastleVersion}" // for rlp encoding
    testCompile "com.madgag.spongycastle:prov:${scastleVersion}" // for rlp encoding
    testCompile "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
}

jar {
    from sourceSets.main.allSource
}

// Configure publishing
publishing {
    publications {
        // Define a Maven publication named 'pomPublication'
        pomPublication(MavenPublication) {
            // Use the default POM generated by Gradle
            from components.java
        }
    }
}

// Task to publish artifacts to local Maven repository
task publishToMavenLocal(type: PublishToMavenLocal) {
    dependsOn publishing
}